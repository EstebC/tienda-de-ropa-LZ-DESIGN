<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>carrito de compras </title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" type="image/png" href="imagenes/logominiof.jpg">

</head>

<body>
  <!-- Contenedor del encabezado -->
  <div id="header-container"></div>

  <!-- Sección del carrito -->
  <section id="content">
    <section id="carrito">
      <h1>Tu Carrito</h1>
      <div class="carrito-productos" id="carrito-productos">
        <!-- Los productos del carrito se mostrarán aquí -->
      </div>

      <!-- Resumen del pedido -->
      <div class="carrito-resumen">
        <h2>Resumen del Pedido</h2>
        <p>Total productos: <span id="total-productos">0</span></p>
        <p>Total: <span id="total-precio">$0</span></p>
        <button class="comprar">Finalizar Compra</button>
      </div>
    </section>
  </section>

  <!-- Contenedor del pie de página -->
  <div id="footer-container"></div>

  <!-- Scripts -->
  <script>
    // Cargar el encabezado desde header.html
    document.addEventListener('DOMContentLoaded', () => {
      // Cargar el header
      fetch('header.html')
        .then(response => response.text())
        .then(data => {
          document.getElementById('header-container').innerHTML = data;
        })
        .catch(error => console.error('Error al cargar el encabezado:', error));

      // Cargar el footer
      fetch('footer.html')
        .then(response => response.text())
        .then(data => {
          document.getElementById('footer-container').innerHTML = data;
        })
        .catch(error => console.error('Error al cargar el pie de página:', error));

      // Obtener el carrito del localStorage
      const carrito = JSON.parse(localStorage.getItem('carrito')) || [];

      // Elementos del carrito
      const carritoProductos = document.getElementById('carrito-productos');
      const totalProductos = document.getElementById('total-productos');
      const totalPrecio = document.getElementById('total-precio');

      // Variables para calcular el total
      let totalCantidad = 0;
      let totalCoste = 0;

      // Crear una lista de productos en el carrito
      carrito.forEach(producto => {
        const productoDiv = document.createElement('div');
        productoDiv.classList.add('carrito-producto');
        productoDiv.innerHTML = `
          <img src="${producto.imagen}" alt="${producto.producto}">
          <div class="producto-detalles">
            <h2>${producto.producto}</h2>
            <p>Talla: ${producto.talla}</p>
            <p>Cantidad: ${producto.cantidad}</p>
            <p>Precio unitario: $${producto.precio}</p>
            <p>Total: $${(producto.precio * producto.cantidad).toFixed(2)}</p>
          </div>
          <button class="eliminar" onclick="eliminarProducto('${producto.producto}', '${producto.talla}')">Eliminar</button>
        `;
        carritoProductos.appendChild(productoDiv);

        // Calcular el total
        totalCantidad += producto.cantidad;
        totalCoste += producto.precio * producto.cantidad;
      });

      // Mostrar el total en el carrito
      totalProductos.textContent = totalCantidad;
      totalPrecio.textContent = `$${totalCoste.toFixed(2)}`;
    });

    // Función para eliminar productos del carrito
    function eliminarProducto(producto, talla) {
      // Obtener el carrito del localStorage
      let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
      // Función para eliminar todo del carrito
      function eliminarTodo() {
        // Eliminar todos los productos del carrito en localStorage
        localStorage.removeItem('carrito');

  // Recargar la página para actualizar el carrito
  location.reload();
}


      // Filtrar el producto a eliminar
      carrito = carrito.filter(item => !(item.producto === producto && item.talla === talla));

      // Actualizar el localStorage
      localStorage.setItem('carrito', JSON.stringify(carrito));

      // Recargar la página para actualizar el carrito
      location.reload();
    }
  </script>
</body>
</html>



